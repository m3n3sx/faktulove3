class NavigationManager {constructor() {this.init()}init() {if (document.readyState === 'loading') {document.addEventListener('DOMContentLoaded', () => this.initializeNavigation())}else {this.initializeNavigation()}}initializeNavigation() {console.log('NavigationManager: Initializing navigation...'); this.initializeSidebar(); this.initializeDropdowns(); this.initializeThemeToggle(); this.initializeActivePageHighlighting(); this.initializeMobileNavigation(); this.initializeIconFallbacks(); console.log('NavigationManager: Navigation initialized successfully')}initializeSidebar() {const sidebarToggle = document.querySelector('.sidebar-toggle'); const sidebar = document.querySelector('.sidebar'); const dashboardMain = document.querySelector('.dashboard-main'); if (sidebarToggle) {sidebarToggle.addEventListener('click', (e) => {e.preventDefault(); sidebarToggle.classList.toggle('active'); if (sidebar) sidebar.classList.toggle('active'); if (dashboardMain) dashboardMain.classList.toggle('active')})}const dropdownItems = document.querySelectorAll('.sidebar-menu .dropdown'); dropdownItems.forEach(item => {item.addEventListener('click', (e) => {e.preventDefault(); dropdownItems.forEach(otherItem => {if (otherItem !== item) {const submenu = otherItem.querySelector('.sidebar-submenu'); if (submenu) {submenu.style.display = 'none'}otherItem.classList.remove('dropdown-open', 'open')}}); const submenu = item.querySelector('.sidebar-submenu'); if (submenu) {const isVisible = submenu.style.display === 'block'; submenu.style.display = isVisible ? 'none' : 'block'; item.classList.toggle('dropdown-open'); item.classList.toggle('open')}})})}initializeMobileNavigation() {const mobileToggle = document.querySelector('.sidebar-mobile-toggle'); const sidebar = document.querySelector('.sidebar'); const body = document.body; if (mobileToggle) {mobileToggle.addEventListener('click', (e) => {e.preventDefault(); if (sidebar) sidebar.classList.add('sidebar-open'); body.classList.add('overlay-active')})}const closeBtn = document.querySelector('.sidebar-close-btn'); if (closeBtn) {closeBtn.addEventListener('click', (e) => {e.preventDefault(); if (sidebar) sidebar.classList.remove('sidebar-open'); body.classList.remove('overlay-active')})}document.addEventListener('click', (e) => {if (body.classList.contains('overlay-active') && !sidebar.contains(e.target) && !mobileToggle.contains(e.target)) {if (sidebar) sidebar.classList.remove('sidebar-open'); body.classList.remove('overlay-active')}})}initializeDropdowns() {const dropdownButtons = document.querySelectorAll('[data-bs-toggle="dropdown"]'); dropdownButtons.forEach(button => {button.addEventListener('click', (e) => {e.preventDefault(); e.stopPropagation(); const dropdownMenu = button.nextElementSibling; if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {document.querySelectorAll('.dropdown-menu.show').forEach(menu => {if (menu !== dropdownMenu) {menu.classList.remove('show')}}); dropdownMenu.classList.toggle('show')}})}); document.addEventListener('click', (e) => {if (!e.target.closest('[data-bs-toggle="dropdown"]')) {document.querySelectorAll('.dropdown-menu.show').forEach(menu => {menu.classList.remove('show')})}})}initializeThemeToggle() {const themeToggle = document.querySelector('[data-theme-toggle]'); if (!themeToggle) return; const updateTheme = (theme) => {document.documentElement.setAttribute('data-theme', theme); localStorage.setItem('theme', theme); themeToggle.textContent = theme; themeToggle.setAttribute('aria-label', theme)}; const savedTheme = localStorage.getItem('theme') || 'light'; updateTheme(savedTheme); themeToggle.addEventListener('click', (e) => {e.preventDefault(); const currentTheme = document.documentElement.getAttribute('data-theme') || 'light'; const newTheme = currentTheme === 'dark' ? 'light' : 'dark'; updateTheme(newTheme)})}initializeActivePageHighlighting() {const currentUrl = window.location.pathname; const navLinks = document.querySelectorAll('.sidebar-menu a[href]'); navLinks.forEach(link => {const href = link.getAttribute('href'); if (href && (href === currentUrl || currentUrl.startsWith(href + '/'))) {link.classList.add('active-page'); const parentDropdown = link.closest('.dropdown'); if (parentDropdown) {parentDropdown.classList.add('dropdown-open', 'open'); const submenu = parentDropdown.querySelector('.sidebar-submenu'); if (submenu) {submenu.style.display = 'block'}}}})}initializeIconFallbacks() {setTimeout(() => {const iconifyIcons = document.querySelectorAll('iconify-icon'); iconifyIcons.forEach(icon => {if (!icon.shadowRoot && icon.offsetWidth === 0) {const iconName = icon.getAttribute('icon'); const fallbackIcon = this.getFallbackIcon(iconName); if (fallbackIcon) {icon.outerHTML = fallbackIcon}}})}, 2000)}getFallbackIcon(iconName) {const iconMap = {'solar:home-smile-angle-outline': '<i class="ri-home-line"></i>', 'hugeicons:permanent-job': '<i class="ri-user-line"></i>', 'hugeicons:calendar-03': '<i class="ri-calendar-line"></i>', 'hugeicons:delivery-box-01': '<i class="ri-box-line"></i>', 'hugeicons:ai-brain-04': '<i class="ri-brain-line"></i>', 'hugeicons:pencil-edit-02': '<i class="ri-edit-line"></i>', 'hugeicons:add-02': '<i class="ri-add-line"></i>', 'hugeicons:clapping-01': '<i class="ri-team-line"></i>', 'hugeicons:workout-run': '<i class="ri-logout-box-line"></i>', 'hugeicons:invoice-03': '<i class="ri-file-text-line"></i>', 'icon-park-outline:setting-two': '<i class="ri-settings-line"></i>', 'heroicons:bars-3-solid': '<i class="ri-menu-line"></i>', 'iconoir:arrow-right': '<i class="ri-arrow-right-line"></i>', 'ion:search-outline': '<i class="ri-search-line"></i>', 'mage:email': '<i class="ri-mail-line"></i>', 'iconoir:bell': '<i class="ri-notification-line"></i>', 'solar:user-linear': '<i class="ri-user-line"></i>', 'tabler:message-check': '<i class="ri-message-line"></i>', 'lucide:power': '<i class="ri-power-line"></i>', 'radix-icons:cross-2': '<i class="ri-close-line"></i>', 'radix-icons:cross-1': '<i class="ri-close-line"></i>' }; return iconMap[iconName] || '<i class="ri-question-line"></i>'}refresh() {this.initializeNavigation()}}window.NavigationManager = new NavigationManager(); if (typeof module !== 'undefined' && module.exports) {module.exports = NavigationManager}
(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>l});const a=window.React;var r=e.n(a);const n=({apiBaseUrl:e="/api/v1",csrfToken:t,maxFileSize:n=10,supportedTypes:l={},recentUploads:o=[]})=>{const[s,i]=(0,a.useState)(null),[p,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(0),[m,f]=(0,a.useState)(""),[y,g]=(0,a.useState)("");return r().createElement("div",{className:"upload-app"},r().createElement("div",{className:"upload-container"},r().createElement("h2",{className:"upload-title"},"PrzesyÅ‚anie dokumentu OCR"),r().createElement("div",{className:"upload-area "+(s?"has-file":""),onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over");const t=e.dataTransfer.files;if(t.length>0){const e=t[0];i(e)}}},r().createElement("div",{className:"upload-icon"},"ðŸ“„"),r().createElement("p",{className:"upload-text"},s?`Wybrany plik: ${s.name}`:"PrzeciÄ…gnij plik tutaj lub kliknij aby wybraÄ‡"),r().createElement("input",{type:"file",id:"file-input",className:"file-input",accept:".pdf,.jpg,.jpeg,.png,.tiff",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>1024*n*1024)return f(`Plik jest za duÅ¼y. Maksymalny rozmiar to ${n}MB.`),void g("error");if(!["application/pdf","image/jpeg","image/png","image/tiff"].includes(t.type))return f("NieobsÅ‚ugiwany typ pliku. Dozwolone: PDF, JPEG, PNG, TIFF."),void g("error");i(t),f(""),g("")}},disabled:p}),r().createElement("label",{htmlFor:"file-input",className:"file-input-label"},"Wybierz plik")),s&&r().createElement("div",{className:"file-info"},r().createElement("p",null,`Nazwa: ${s.name}`),r().createElement("p",null,`Rozmiar: ${(s.size/1024/1024).toFixed(2)} MB`),r().createElement("p",null,`Typ: ${s.type}`)),p&&r().createElement("div",{className:"progress-container"},r().createElement("div",{className:"progress"},r().createElement("div",{className:"progress-bar",style:{width:`${d}%`}})),r().createElement("p",{className:"progress-text"},`${d}%`)),m&&r().createElement("div",{className:`status-message ${y}`},m),r().createElement("button",{className:"upload-button",onClick:async()=>{if(!s)return f("ProszÄ™ wybraÄ‡ plik do przesÅ‚ania."),void g("error");c(!0),u(0),f("PrzesyÅ‚anie pliku..."),g("info");const e=new FormData;e.append("document",s);try{const a=new XMLHttpRequest;a.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);u(t)}}),a.onload=function(){200===a.status||302===a.status?(f("Plik zostaÅ‚ pomyÅ›lnie przesÅ‚any!"),g("success"),i(null),u(0),setTimeout(()=>{window.location.href="/ocr/results/"},2e3)):(f("BÅ‚Ä…d podczas przesyÅ‚ania pliku. SprÃ³buj ponownie."),g("error")),c(!1)},a.onerror=function(){f("BÅ‚Ä…d poÅ‚Ä…czenia. SprawdÅº poÅ‚Ä…czenie internetowe."),g("error"),c(!1)},a.open("POST","/ocr/upload/"),a.setRequestHeader("X-CSRFToken",t),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(e)}catch(e){console.error("Upload error:",e),f("WystÄ…piÅ‚ bÅ‚Ä…d podczas przesyÅ‚ania pliku."),g("error"),c(!1)}},disabled:!s||p},p?"PrzesyÅ‚anie...":"PrzeÅ›lij dokument"),r().createElement("div",{className:"supported-formats"},r().createElement("h3",null,"ObsÅ‚ugiwane formaty:"),r().createElement("ul",null,r().createElement("li",null,`PDF (max ${n}MB)`),r().createElement("li",null,`JPEG, PNG (max ${n}MB)`),r().createElement("li",null,`TIFF (max ${n}MB)`)))))};"undefined"!=typeof window&&(window.UploadApp=n);const l=n;window.UploadApp=t})();